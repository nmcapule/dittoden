syntax = "proto3";

package dittoden.schema;

import 'google/protobuf/timestamp.proto';

enum EntityType {
    ET_UNSPECIFIED = 0;
    ET_PERSON = 1;
    ET_ORGANIZATION = 2;
    ET_LOCATION = 3;
    ET_EVENT = 4;
    ET_ARTIFACT = 5;
}

// Represents a generic entity with various possible types and details.
message Entity {
    // Unique identifier for the entity.
    string uuid = 1;

    // Semi-human readable code for the entity. Unique within its entity type.
    string code = 2;

    // Human-readable labels associated with the entity.
    message Label {
        string label = 1;

        enum LabelType {
            LT_UNSPECIFIED = 0;
            LT_PRIMARY = 1;
            LT_ALTERNATIVE = 2;
            LT_TITLE = 3;
        }
        LabelType type = 2;
    }
    repeated Label labels = 3;

    // Type of the entity.
    EntityType type = 4;

    // Entity-type specific properties.
    oneof properties {
        message PersonDetails {
            string first_name = 1;
            string last_name = 2;
            google.protobuf.Timestamp birth_date = 3;
        }
        PersonDetails person = 5;

        message OrganizationDetails {
            string registration_number = 1;
            google.protobuf.Timestamp created = 2;
        }
        OrganizationDetails organization = 6;

        message LocationDetails {
            string latitude = 1;
            string longitude = 2;
        }
        LocationDetails location = 7;

        message EventDetails {
            string event_date = 1;
            string location = 2;
        }
        EventDetails event = 8;
    }
}
