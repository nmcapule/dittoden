syntax = "proto3";

package dittoden.schema;

import 'google/protobuf/timestamp.proto';

enum RelationshipType {
    RT_UNSPECIFIED = 0;

    // Person-to-person relationships.
    RT_P2P_UNSPECIFIED = 1;
    RT_P2P_PARENT_CHILD = 2;
    RT_P2P_SIBLINGS = 3;
    RT_P2P_SPOUSE = 4;
    RT_P2P_ACQUAINTANCE = 12;
    RT_P2P_CLOSE_FRIEND = 13;
    RT_P2P_ROMANTIC_PARTNER = 14;
    RT_P2P_PEER = 22;
    RT_P2P_SUPERIOR_SUBORDINATE = 23;
    RT_P2P_BUSINESS_PARTNER = 24;

    // Organization-to-person relationships.
    RT_O2P_UNSPECIFIED = 101;
    RT_O2P_MEMBER = 102;
    RT_O2P_EXECUTIVE = 103;

    // Organization-to-organization relationships.
    RT_O2O_UNSPECIFIED = 201;
    RT_O2O_PARENT_SUBSIDIARY = 202;
    RT_O2O_PARTNERSHIP = 203;

    // Artifact-to-entity relationships.
    RT_A2P_UNSPECIFIED = 301;
    RT_A2P_CREATOR = 302;
    RT_A2P_OWNER = 303;
    RT_A2P_CONTRIBUTOR = 304;
}

// Represents a relationship between two entities.
message Relationship {
    // Unique identifier for the relationship.
    string uuid = 1;

    // Type of the relationship.
    RelationshipType type = 2;

    // The two entities involved in the relationship. If the relationship is bidirectional, use
    // entity with lower UUID as entity_a.
    string entity_a_uuid = 3;
    string entity_z_uuid = 4;

    // Roles of the entities in the relationship.
    string entity_a_role = 5;
    string entity_z_role = 6;

    // If the relationship is bidirectional.
    boolean is_bidirectional = 7;

    // Timestamp when the relationship started.
    google.protobuf.Timestamp started = 8;
    // Timestamp when the relationship ended.
    google.protobuf.Timestamp ended = 9;

    // Additional tags or metadata associated with the relationship.
    message Tag {
        string name = 1;
        string value = 2;
    }
    repeated Tag tags = 1;
}
